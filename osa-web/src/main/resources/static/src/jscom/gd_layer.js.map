{"version":3,"sources":["../../../src/jscom/gd_layer.js"],"names":["showLayer","showConfirm","closeLayer","closeAllLayer","closeConfirm","layers","config","id","undefined","$","remove","dom","createLayerDom","append","domBody","find","domContent","width","height","size","Array","length","parseFloat","css","title","btn","pos","getLayerPosition","addClass","left","top","visibility","setTimeout","removeClass","bindEvents","success","focus","autoFocus","inputs","each","i","el","disabled","readOnly","push","createConfirmDom","textWidth","html","btnHtml","forEach","o","class","enter","text","gd","getMaxZIndex","content","placeholder","replaceWith","wrapInner","attr","setApi","closeHtml","titleHtml","url","ajax","type","data","ready","setContent","close","layerWidth","layerHeight","window","innerWidth","innerHeight","isMouseDown","startX","startY","curLeft","curTop","layerBody","resize","document","on","e","clientX","clientY","Math","max","min","index","action","key","click","is","hide","children","end","indexOf","splice","closelayer"],"mappings":";;;;;;;;QAIgBA,S,GAAAA,S;QAkEAC,W,GAAAA,W;QAqPAC,U,GAAAA,U;QAoCAC,a,GAAAA,a;QAQAC,Y,GAAAA,Y;AAvWhB,IAAIC,SAAS,EAAb,C,CAAiB;AACjB;;;AAGO,SAASL,SAAT,CAAmBM,MAAnB,EAA2B;AAC9B,QAAIA,OAAOC,EAAP,KAAcC,SAAlB,EAA6B;AACzBC,UAAE,MAAMH,OAAOC,EAAf,EAAmBG,MAAnB;AACH;AACD,QAAIC,MAAMC,eAAeN,MAAf,CAAV;AACAG,MAAE,MAAF,EAAUI,MAAV,CAAiBF,GAAjB;AACA,QAAIG,UAAUH,IAAII,IAAJ,CAAS,gBAAT,CAAd;AACA,QAAIC,aAAaL,IAAII,IAAJ,CAAS,mBAAT,CAAjB;AACA,QAAIE,QAAQH,QAAQG,KAAR,EAAZ;AACA,QAAIC,SAASJ,QAAQI,MAAR,EAAb;AACA,QAAIZ,OAAOa,IAAP,YAAuBC,KAAvB,IAAgCd,OAAOa,IAAP,CAAYE,MAAZ,IAAsB,CAA1D,EAA6D;AACzDf,eAAOa,IAAP,CAAY,CAAZ,IAAiBG,WAAWhB,OAAOa,IAAP,CAAY,CAAZ,CAAX,CAAjB;AACAb,eAAOa,IAAP,CAAY,CAAZ,IAAiBG,WAAWhB,OAAOa,IAAP,CAAY,CAAZ,CAAX,CAAjB;AACAL,gBAAQS,GAAR,CAAY;AACRN,mBAAOX,OAAOa,IAAP,CAAY,CAAZ,CADC;AAERD,oBAAQZ,OAAOa,IAAP,CAAY,CAAZ;AAFA,SAAZ;AAIAF,gBAAQX,OAAOa,IAAP,CAAY,CAAZ,CAAR;AACAD,iBAASZ,OAAOa,IAAP,CAAY,CAAZ,CAAT;AACA,YAAI,CAACb,OAAOkB,KAAR,IAAiB,EAAElB,OAAOmB,GAAP,IAAcnB,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAApC,CAArB,EAA6D;AACzDL,uBAAWO,GAAX,CAAe,QAAf,EAAyBjB,OAAOa,IAAP,CAAY,CAAZ,CAAzB;AACH,SAFD,MAEO,IAAI,CAACb,OAAOkB,KAAZ,EAAmB;AACtBR,uBAAWO,GAAX,CAAe,QAAf,EAAyBjB,OAAOa,IAAP,CAAY,CAAZ,IAAiB,EAA1C;AACH,SAFM,MAEA,IAAI,EAAEb,OAAOmB,GAAP,IAAcnB,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAApC,CAAJ,EAA4C;AAC/CL,uBAAWO,GAAX,CAAe,QAAf,EAAyBjB,OAAOa,IAAP,CAAY,CAAZ,IAAiB,EAA1C;AACH;AACJ,KAhBD,MAgBO;AACHb,eAAOa,IAAP,GAAc,CAACF,KAAD,EAAQC,MAAR,CAAd;AACH;AACD,QAAIQ,MAAMC,iBAAiBV,KAAjB,EAAwBC,MAAxB,CAAV;AACA,QAAIZ,OAAOkB,KAAP,KAAiBhB,SAArB,EAAgC;AAC5BM,gBAAQc,QAAR,CAAiB,eAAjB,EAAkCL,GAAlC,CAAsC;AAClCM,kBAAMH,IAAIG,IADwB;AAElCC,iBAAKJ,IAAII,GAFyB;AAGlCC,wBAAY;AAHsB,SAAtC;AAKH,KAND,MAMO;AACHjB,gBAAQc,QAAR,CAAiB,sBAAjB,EAAyCL,GAAzC,CAA6C;AACzCM,kBAAM,KADmC;AAEzCC,iBAAK,KAFoC;AAGzCC,wBAAY;AAH6B,SAA7C;AAKH;AACDC,eAAW,YAAM;AACbrB,YAAII,IAAJ,CAAS,gBAAT,EAA2BkB,WAA3B,CAAuC,eAAvC;AACH,KAFD,EAEG,GAFH;AAGAC,eAAWvB,GAAX;AACA,QAAIA,IAAIL,MAAJ,CAAW6B,OAAX,KAAuB3B,SAA3B,EAAsC;AAClCG,YAAIL,MAAJ,CAAW6B,OAAX,CAAmBxB,GAAnB;AACH;AACDA,QAAIyB,KAAJ;AACA,QAAIzB,IAAIL,MAAJ,CAAW+B,SAAX,KAAyB,KAA7B,EAAoC;AAChC,YAAIC,SAAS3B,IAAII,IAAJ,CAAS,oDAAT,CAAb;AACAN,UAAE8B,IAAF,CAAOD,MAAP,EAAe,UAASE,CAAT,EAAYC,EAAZ,EAAgB;AAC3B,gBAAI,CAACA,GAAGC,QAAJ,IAAgB,CAACD,GAAGE,QAAxB,EAAkC;AAC9BF,mBAAGL,KAAH;AACA,uBAAO,KAAP;AACH;AACJ,SALD;AAMH;AACD/B,WAAOuC,IAAP,CAAYjC,GAAZ;AACA,WAAOA,GAAP;AACH;AACD;;;AAGO,SAASV,WAAT,CAAqBK,MAArB,EAA6B;AAChC,QAAIK,MAAMkC,iBAAiBvC,MAAjB,CAAV;AACAG,MAAE,MAAF,EAAUI,MAAV,CAAiBF,GAAjB;AACA,QAAIG,UAAUH,IAAII,IAAJ,CAAS,gBAAT,CAAd;AACA,QAAI+B,YAAYhC,QAAQC,IAAR,CAAa,wBAAb,EAAuCE,KAAvC,EAAhB;AACA,QAAI6B,YAAYxB,WAAWR,QAAQC,IAAR,CAAa,qBAAb,EAAoCQ,GAApC,CAAwC,WAAxC,CAAX,IAAmE,GAAnF,EAAwF;AACpFT,gBAAQC,IAAR,CAAa,qBAAb,EAAoCQ,GAApC,CAAwC,YAAxC,EAAsD,MAAtD;AACH;AACDT,YAAQC,IAAR,CAAa,qBAAb,EAAoCgC,IAApC,CAAyCjC,QAAQC,IAAR,CAAa,wBAAb,EAAuCgC,IAAvC,EAAzC;AACA,QAAI9B,QAAQH,QAAQG,KAAR,EAAZ;AACA,QAAIC,SAASJ,QAAQI,MAAR,EAAb;AACAZ,WAAOa,IAAP,GAAc,CAACF,KAAD,EAAQC,MAAR,CAAd;AACA,QAAIQ,MAAMC,iBAAiBV,KAAjB,EAAwBC,MAAxB,CAAV;AACAJ,YAAQS,GAAR,CAAY;AACRM,cAAMH,IAAIG,IADF;AAERC,aAAKJ,IAAII,GAFD;AAGRC,oBAAY;AAHJ,KAAZ;AAKAC,eAAW,YAAM;AACblB,gBAAQmB,WAAR,CAAoB,eAApB;AACH,KAFD,EAEG,GAFH;AAGAC,eAAWvB,GAAX;AACAA,QAAIyB,KAAJ;AACA,QAAIzB,IAAIL,MAAJ,CAAW6B,OAAX,KAAuB3B,SAA3B,EAAsC;AAClCG,YAAIL,MAAJ,CAAW6B,OAAX,CAAmBxB,GAAnB;AACH;AACD,WAAOA,GAAP;AACH;AACD;;;AAGA,SAASkC,gBAAT,CAA0BvC,MAA1B,EAAkC;AAC9B,QAAI0C,UAAU,EAAd;AACA,QAAI1C,OAAOmB,GAAP,IAAcnB,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAAtC,EAAyC;AACrC2B,mBAAW,iCAAX;AACA1C,eAAOmB,GAAP,CAAWwB,OAAX,CAAmB,UAACC,CAAD,EAAIV,CAAJ,EAAU;AACzBQ,yDAA0CE,EAAEC,KAAF,KACrCX,MAAMlC,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAA1B,IAA+Bf,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAAnD,GAAuD,eAAvD,GAAyE,QADpC,CAA1C,6BAEM6B,EAAEE,KAAF,KAAY,IAAZ,GAAmB,OAAnB,GAA6B,EAFnC,UAEyCF,EAAEG,IAF3C;AAGH,SAJD;AAKAL,mBAAW,QAAX;AACH;AACD,QAAIzC,KAAKD,OAAOC,EAAP,KAAcC,SAAd,GAA0B,EAA1B,YAAsCF,OAAOC,EAA7C,MAAT;AACA,QAAII,MAAMF,8CACyBF,EADzB,yBAC8C+C,GAAGC,YAAH,KAAoB,IADlE,6OAKAP,OALA,oFAAV;AAUA,QAAI1C,OAAOkD,OAAP,KAAmBhD,SAAvB,EAAkC;AAC9B,YAAIgD,UAAUlD,OAAOkD,OAArB;AACA,YAAI,QAAOA,OAAP,yCAAOA,OAAP,MAAkB,QAAtB,EAAgC;AAC5B7C,gBAAI8C,WAAJ,GAAkBhD,EAAE,wBAAF,EAA4BY,MAA9C;AACAZ,cAAEH,OAAOkD,OAAT,EAAkBE,WAAlB,sCAAiE/C,IAAI8C,WAArE;AACAhD,cAAEE,GAAF,EACKI,IADL,CACU,wBADV,EAEK4C,SAFL,CAEelD,EAAEH,OAAOkD,OAAT,CAFf;AAGH,SAND,MAMO;AACH/C,cAAEE,GAAF,EACKI,IADL,CACU,wBADV,EAEKF,MAFL,CAEYP,OAAOkD,OAFnB;AAGH;AACJ;AACD7C,QAAIiD,IAAJ,CAAS,UAAT,EAAqBjD,IAAIY,GAAJ,CAAQ,SAAR,CAArB;AACAZ,QAAIL,MAAJ,GAAaA,MAAb;AACAuD,WAAOlD,GAAP;AACA,WAAOA,GAAP;AACH;AACD;;;AAGA,SAASC,cAAT,CAAwBN,MAAxB,EAAgC;AAC5B,QAAIwD,YAAY,EAAhB;AACA,QAAIC,YAAY,EAAhB;AACA,QAAIzD,OAAOkB,KAAX,EAAkB;AACduC,6GAC8CzD,OAAOkB,KADrD;AAIH,KALD,MAKO;AACHsC;AACH;AACD,QAAId,UAAU,EAAd;AACA,QAAI1C,OAAOmB,GAAP,IAAcnB,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAAtC,EAAyC;AACrC2B,mBAAW,+BAAX;AACA1C,eAAOmB,GAAP,CAAWwB,OAAX,CAAmB,UAACC,CAAD,EAAIV,CAAJ,EAAU;AACzBQ,yDAA0CE,EAAEC,KAAF,KACrCX,MAAMlC,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAA1B,IAA+Bf,OAAOmB,GAAP,CAAWJ,MAAX,GAAoB,CAAnD,GAAuD,eAAvD,GAAyE,QADpC,CAA1C,6BAEM6B,EAAEE,KAAF,KAAY,IAAZ,GAAmB,OAAnB,GAA6B,EAFnC,UAEyCF,EAAEG,IAF3C;AAGH,SAJD;AAKAL,mBAAW,QAAX;AACH;;AAED,QAAIzC,KAAKD,OAAOC,EAAP,KAAcC,SAAd,GAA0B,EAA1B,YAAsCF,OAAOC,EAA7C,MAAT;AACA,QAAII,MAAMF,mCACcF,EADd,yBACmC+C,GAAGC,YAAH,KAAoB,IADvD,8DAGAQ,SAHA,GAGYD,SAHZ,wEAKAd,OALA,oFAAV;AAUA,QAAI1C,OAAOkD,OAAP,KAAmBhD,SAAvB,EAAkC;AAC9B,YAAIgD,UAAUlD,OAAOkD,OAArB;AACA,YAAI,QAAOA,OAAP,yCAAOA,OAAP,MAAkB,QAAtB,EAAgC;AAC5B7C,gBAAI8C,WAAJ,GAAkBhD,EAAE,wBAAF,EAA4BY,MAA9C;AACAZ,cAAEH,OAAOkD,OAAT,EAAkBE,WAAlB,sCAAiE/C,IAAI8C,WAArE;AACAhD,cAAEE,GAAF,EACKI,IADL,CACU,mBADV,EAEK4C,SAFL,CAEelD,EAAEH,OAAOkD,OAAT,CAFf;AAGH,SAND,MAMO;AACH/C,cAAEE,GAAF,EACKI,IADL,CACU,mBADV,EAEKF,MAFL,CAEYP,OAAOkD,OAFnB;AAGH;AACJ,KAbD,MAaO,IAAIlD,OAAO0D,GAAP,KAAexD,SAAnB,EAA8B;AACjCC,UAAEwD,IAAF,CAAO;AACHC,kBAAM,KADH;AAEHF,iBAAK1D,OAAO0D,GAFT;AAGH7B,qBAAS,iBAASgC,IAAT,EAAe;AACpB1D,kBAAEE,GAAF,EACKI,IADL,CACU,mBADV,EAEKF,MAFL,CAEYsD,IAFZ;AAGA,oBAAI,OAAO7D,OAAO8D,KAAd,KAAwB,UAA5B,EAAwC;AACpC9D,2BAAO8D,KAAP,CAAazD,GAAb;AACH;AACJ;AAVE,SAAP;AAYH;AACDA,QAAIiD,IAAJ,CAAS,UAAT,EAAqBjD,IAAIY,GAAJ,CAAQ,SAAR,CAArB;AACAZ,QAAIL,MAAJ,GAAaA,MAAb;AACAuD,WAAOlD,GAAP;AACA,WAAOA,GAAP;AACH;AACD;;;AAGA,SAASkD,MAAT,CAAgBlD,GAAhB,EAAqB;AACjB;AACAA,QAAI0D,UAAJ,GAAiB,UAASb,OAAT,EAAkB;AAC/B7C,YAAII,IAAJ,CAAS,mBAAT,EAA8BgC,IAA9B,CAAmCS,OAAnC;AACA7C,YAAIL,MAAJ,CAAWkD,OAAX,GAAqBA,OAArB;AACH,KAHD;AAIA;AACA7C,QAAI2D,KAAJ,GAAY,YAAW;AACnBpE,mBAAWS,GAAX;AACH,KAFD;AAGH;AACD;;;AAGA,SAASgB,gBAAT,CAA0BV,KAA1B,EAAiCC,MAAjC,EAAyC;AACrC,QAAIqD,aAAajD,WAAWL,KAAX,CAAjB;AACA,QAAIuD,cAAclD,WAAWJ,MAAX,CAAlB;AACA,QAAIW,OAAO,CAAC4C,OAAOC,UAAP,GAAoBH,UAArB,IAAmC,CAAnC,GAAuC,IAAlD;AACA,QAAIzC,MAAM,CAAC2C,OAAOE,WAAP,GAAqBH,WAAtB,IAAqC,CAArC,GAAyC,IAAnD;AACA,WAAO,EAAE3C,UAAF,EAAQC,QAAR,EAAP;AACH;AACD;;;AAGA,SAASI,UAAT,CAAoBvB,GAApB,EAAyB;AAAA,QAChBiE,WADgB,GACiC,KADjC;AAAA,QACHC,MADG,GACwC,CADxC;AAAA,QACKC,MADL,GAC2C,CAD3C;AAAA,QACaC,OADb,GAC8C,CAD9C;AAAA,QACsBC,MADtB,GACiD,CADjD;;AAErB,QAAIC,YAAYxE,EAAEE,GAAF,EAAOI,IAAP,CAAY,gBAAZ,CAAhB;AACAN,MAAEgE,MAAF,EAAUS,MAAV,CAAiB,YAAM;AACnB;AACA,YAAIxD,MAAMC,iBAAiBhB,IAAIL,MAAJ,CAAWa,IAAX,CAAgB,CAAhB,CAAjB,EAAqCR,IAAIL,MAAJ,CAAWa,IAAX,CAAgB,CAAhB,CAArC,CAAV;AACAV,UAAEwE,SAAF,EAAa1D,GAAb,CAAiB;AACbM,kBAAMH,IAAIG,IADG;AAEbC,iBAAKJ,IAAII;AAFI,SAAjB;AAIH,KAPD;AAQArB,MAAE0E,QAAF;AACI;AADJ,KAEKC,EAFL,CAEQ,WAFR,EAEqB,aAAK;AAClB,YAAIvD,OAAOkD,WAAWM,EAAEC,OAAF,GAAYT,MAAvB,CAAX;AACA,YAAI/C,MAAMkD,UAAUK,EAAEE,OAAF,GAAYT,MAAtB,CAAV;AACAjD,eAAO2D,KAAKC,GAAL,CAAS5D,IAAT,EAAe,CAAf,CAAP;AACAA,eAAO2D,KAAKE,GAAL,CAAS7D,IAAT,EAAe4C,OAAOC,UAAP,GAAoB/D,IAAIL,MAAJ,CAAWa,IAAX,CAAgB,CAAhB,CAAnC,CAAP;AACAW,cAAM0D,KAAKC,GAAL,CAAS3D,GAAT,EAAc,CAAd,CAAN;AACAA,cAAM0D,KAAKE,GAAL,CAAS5D,GAAT,EAAc2C,OAAOE,WAAP,GAAqBhE,IAAIL,MAAJ,CAAWa,IAAX,CAAgB,CAAhB,CAAnC,CAAN;AACA,YAAIyD,WAAJ,EAAiB;AACbnE,cAAEwE,SAAF,EAAa1D,GAAb,CAAiB,EAAEM,UAAF,EAAQC,QAAR,EAAjB;AACH;AACJ,KAZL;AAaI;AAbJ,KAcKsD,EAdL,CAcQ,SAdR,EAcmB,aAAK;AAChBR,sBAAc,KAAd;AACAnE,UAAE,MAAF,EAAUwB,WAAV,CAAsB,gBAAtB;AACH,KAjBL;;AAmBAxB,MAAEE,GAAF;AACI;AADJ,KAEKyE,EAFL,CAEQ,OAFR,EAEiB,iBAFjB,EAEoC,YAAM;AAClC3E,UAAEwE,SAAF,EAAarD,QAAb,CAAsB,gBAAtB;AACAI,mBAAW,YAAM;AACbvB,cAAEwE,SAAF,EAAahD,WAAb,CAAyB,gBAAzB;AACH,SAFD,EAEG,GAFH;AAGH,KAPL;AAQI;AARJ,KASKmD,EATL,CASQ,WATR,EASqB,qCATrB,EAS4D,aAAK;AACzDR,sBAAc,IAAd;AACAG,kBAAUzD,WAAWb,EAAEwE,SAAF,EAAa1D,GAAb,CAAiB,MAAjB,CAAX,CAAV;AACAyD,iBAAS1D,WAAWb,EAAEwE,SAAF,EAAa1D,GAAb,CAAiB,KAAjB,CAAX,CAAT;AACAsD,iBAASQ,EAAEC,OAAX;AACAR,iBAASO,EAAEE,OAAX;AACA9E,UAAE,MAAF,EAAUmB,QAAV,CAAmB,gBAAnB;AACH,KAhBL;AAiBI;AAjBJ,KAkBKwD,EAlBL,CAkBQ,WAlBR,EAkBqB,iBAlBrB,EAkBwC,YAAM;AACtC,eAAO,KAAP;AACH,KApBL;AAqBI;AArBJ,KAsBKA,EAtBL,CAsBQ,OAtBR,EAsBiB,eAtBjB,EAsBkC,YAAW;AACrC,YAAIO,QAAQlF,EAAEE,GAAF,EACPI,IADO,CACF,eADE,EAEP4E,KAFO,CAED,IAFC,CAAZ;AAGA,YAAI,OAAOhF,IAAIL,MAAJ,CAAWmB,GAAX,CAAekE,KAAf,EAAsBC,MAA7B,IAAuC,UAA3C,EAAuD;AACnD,gBAAIjF,IAAIL,MAAJ,CAAWmB,GAAX,CAAekE,KAAf,EAAsBC,MAAtB,CAA6BjF,GAA7B,MAAsC,KAA1C,EAAiD;AAC7C2C,mBAAGpD,UAAH,CAAcS,GAAd;AACH;AACJ;AACJ,KA/BL;AAgCI;AAhCJ,KAiCKyE,EAjCL,CAiCQ,OAjCR,EAiCiB,qCAjCjB,EAiCwD,YAAM;AACtDlF,mBAAWS,GAAX;AACA,eAAO,KAAP;AACH,KApCL;AAqCI;AArCJ,KAsCKyE,EAtCL,CAsCQ,SAtCR,EAsCmB,aAAK;AAChB,YAAIC,EAAEQ,GAAF,KAAU,OAAd,EAAuB;AACnBlF,gBAAII,IAAJ,CAAS,4BAAT,EAAuC+E,KAAvC;AACH;AACJ,KA1CL;AA2CH;;AAED;;;AAGO,SAAS5F,UAAT,CAAoBS,GAApB,EAAyB;AAC5BA,QAAII,IAAJ,CAAS,gBAAT,EAA2BkB,WAA3B,CAAuC,oCAAvC;AACA,QAAItB,IAAIL,MAAJ,CAAWkB,KAAX,KAAqBhB,SAArB,IAAkCG,IAAIoF,EAAJ,CAAO,aAAP,CAAtC,EAA6D;AACzDtF,UAAEE,GAAF,EAAOiB,QAAP,CAAgB,eAAhB;AACA;;;;;AAKA;AACAnB,UAAEE,GAAF,EAAOI,IAAP,CAAY,iBAAZ,EAA+BiF,IAA/B;AACA;AACH,KAVD,MAUO;AACHvF,UAAEE,GAAF,EAAOiB,QAAP,CAAgB,sBAAhB;AACH;;AAEDI,eAAW,YAAM;AACb,YAAIrB,IAAI8C,WAAJ,KAAoBjD,SAAxB,EAAmC;AAC/BC,kDAAoCE,IAAI8C,WAAxC,SAAyDC,WAAzD,CACI/C,IAAII,IAAJ,CAAS,mBAAT,EAA8BkF,QAA9B,EADJ;AAGH;AACDxF,UAAEE,GAAF,EAAOD,MAAP;AACA,YAAIC,IAAIL,MAAJ,CAAW4F,GAAX,KAAmB1F,SAAvB,EAAkC;AAC9BG,gBAAIL,MAAJ,CAAW4F,GAAX,CAAevF,GAAf;AACH;AACD,YAAIgF,QAAQtF,OAAO8F,OAAP,CAAexF,GAAf,CAAZ;AACA,YAAIgF,QAAQ,CAAC,CAAb,EAAgB;AACZtF,mBAAO+F,MAAP,CAAcT,KAAd,EAAqB,CAArB;AACH;AACDlF,UAAE,aAAF,EAAiBC,MAAjB;AACH,KAfD,EAeG,GAfH;AAgBH;AACD;;;AAGO,SAASP,aAAT,GAAyB;AAC5BE,WAAO4C,OAAP,CAAe,eAAO;AAClB/C,mBAAWS,GAAX;AACH,KAFD;AAGH;AACD;;;AAGO,SAASP,YAAT,CAAsBO,GAAtB,EAA2B;AAC9B0F,eAAW1F,GAAX;AACH","file":"gd_layer.js","sourcesContent":["let layers = []; //保存弹窗，用于全部关闭\r\n/**\r\n * 显示弹窗\r\n */\r\nexport function showLayer(config) {\r\n    if (config.id !== undefined) {\r\n        $('#' + config.id).remove();\r\n    }\r\n    let dom = createLayerDom(config);\r\n    $('body').append(dom);\r\n    let domBody = dom.find('.gd-layer-body');\r\n    let domContent = dom.find('.gd-layer-content');\r\n    let width = domBody.width();\r\n    let height = domBody.height();\r\n    if (config.size instanceof Array && config.size.length == 2) {\r\n        config.size[0] = parseFloat(config.size[0]);\r\n        config.size[1] = parseFloat(config.size[1]);\r\n        domBody.css({\r\n            width: config.size[0],\r\n            height: config.size[1]\r\n        });\r\n        width = config.size[0];\r\n        height = config.size[1];\r\n        if (!config.title && !(config.btn && config.btn.length > 0)) {\r\n            domContent.css('height', config.size[1]);\r\n        } else if (!config.title) {\r\n            domContent.css('height', config.size[1] - 62);\r\n        } else if (!(config.btn && config.btn.length > 0)) {\r\n            domContent.css('height', config.size[1] - 56);\r\n        }\r\n    } else {\r\n        config.size = [width, height];\r\n    }\r\n    let pos = getLayerPosition(width, height);\r\n    if (config.title !== undefined) {\r\n        domBody.addClass('gd-layer-show').css({\r\n            left: pos.left,\r\n            top: pos.top,\r\n            visibility: 'visible'\r\n        });\r\n    } else {\r\n        domBody.addClass('gd-layer-show-center').css({\r\n            left: '50%',\r\n            top: '50%',\r\n            visibility: 'visible'\r\n        });\r\n    }\r\n    setTimeout(() => {\r\n        dom.find('.gd-layer-body').removeClass('gd-layer-show');\r\n    }, 300);\r\n    bindEvents(dom);\r\n    if (dom.config.success !== undefined) {\r\n        dom.config.success(dom);\r\n    }\r\n    dom.focus();\r\n    if (dom.config.autoFocus !== false) {\r\n        let inputs = dom.find('input[type=\"text\"],input[type=\"password\"],textarea');\r\n        $.each(inputs, function(i, el) {\r\n            if (!el.disabled && !el.readOnly) {\r\n                el.focus();\r\n                return false;\r\n            }\r\n        });\r\n    }\r\n    layers.push(dom);\r\n    return dom;\r\n}\r\n/**\r\n * 显示确认框\r\n */\r\nexport function showConfirm(config) {\r\n    let dom = createConfirmDom(config);\r\n    $('body').append(dom);\r\n    let domBody = dom.find('.gd-layer-body');\r\n    let textWidth = domBody.find('.gd-layer-confirm-text').width();\r\n    if (textWidth > parseFloat(domBody.find('.gd-confirm-content').css('max-width')) - 120) {\r\n        domBody.find('.gd-confirm-content').css('text-align', 'left');\r\n    }\r\n    domBody.find('.gd-confirm-content').html(domBody.find('.gd-layer-confirm-text').html());\r\n    let width = domBody.width();\r\n    let height = domBody.height();\r\n    config.size = [width, height];\r\n    let pos = getLayerPosition(width, height);\r\n    domBody.css({\r\n        left: pos.left,\r\n        top: pos.top,\r\n        visibility: 'visible'\r\n    });\r\n    setTimeout(() => {\r\n        domBody.removeClass('gd-layer-show');\r\n    }, 300);\r\n    bindEvents(dom);\r\n    dom.focus();\r\n    if (dom.config.success !== undefined) {\r\n        dom.config.success(dom);\r\n    }\r\n    return dom;\r\n}\r\n/**\r\n * 创建dom\r\n */\r\nfunction createConfirmDom(config) {\r\n    let btnHtml = '';\r\n    if (config.btn && config.btn.length > 0) {\r\n        btnHtml += '<div class=\"gd-confirm-footer\">';\r\n        config.btn.forEach((o, i) => {\r\n            btnHtml += `<button class=\"gd-layer-btn ${o.class ||\r\n                (i === config.btn.length - 1 && config.btn.length > 1 ? 'gd-btn-cancel' : 'gd-btn')}\"\r\n                ${o.enter === true ? 'enter' : ''}>${o.text}</button>`;\r\n        });\r\n        btnHtml += '</div>';\r\n    }\r\n    let id = config.id === undefined ? '' : `id=\"${config.id}\"`;\r\n    let dom = $(`\r\n    <div class=\"gd-layer gd-confirm\" ${id} style=\"z-index:${gd.getMaxZIndex() + 1000}\">\r\n        <div class=\"gd-layer-body gd-layer-show\">\r\n            <div class=\"gd-confirm-header\"></div>\r\n            <div class=\"gd-layer-content gd-confirm-content\"><div class=\"gd-layer-confirm-text\"></div></div>\r\n            ${btnHtml}\r\n        </div>\r\n        <div class=\"gd-layer-shade\"></div>\r\n    </div>\r\n    `);\r\n    if (config.content !== undefined) {\r\n        let content = config.content;\r\n        if (typeof content == 'object') {\r\n            dom.placeholder = $('[gd-layer-placeholder]').length;\r\n            $(config.content).replaceWith(`<template gd-layer-placeholder=\"${dom.placeholder}\"></template>`);\r\n            $(dom)\r\n                .find('.gd-layer-confirm-text')\r\n                .wrapInner($(config.content));\r\n        } else {\r\n            $(dom)\r\n                .find('.gd-layer-confirm-text')\r\n                .append(config.content);\r\n        }\r\n    }\r\n    dom.attr('tabindex', dom.css('z-index'));\r\n    dom.config = config;\r\n    setApi(dom);\r\n    return dom;\r\n}\r\n/**\r\n * 创建Layer dom\r\n */\r\nfunction createLayerDom(config) {\r\n    let closeHtml = '';\r\n    let titleHtml = '';\r\n    if (config.title) {\r\n        titleHtml += `<div class=\"gd-layer-header\">\r\n                        <div class=\"gd-layer-title\">${config.title}</div>\r\n                        <i class=\"gd-layer-close icon-close\"></i>\r\n                      </div>`;\r\n    } else {\r\n        closeHtml = `<i class=\"gd-layer-close-btn icon-close\"></i>`;\r\n    }\r\n    let btnHtml = '';\r\n    if (config.btn && config.btn.length > 0) {\r\n        btnHtml += '<div class=\"gd-layer-footer\">';\r\n        config.btn.forEach((o, i) => {\r\n            btnHtml += `<button class=\"gd-layer-btn ${o.class ||\r\n                (i === config.btn.length - 1 && config.btn.length > 1 ? 'gd-btn-cancel' : 'gd-btn')}\"\r\n                ${o.enter === true ? 'enter' : ''}>${o.text}</button>`;\r\n        });\r\n        btnHtml += '</div>';\r\n    }\r\n\r\n    let id = config.id === undefined ? '' : `id=\"${config.id}\"`;\r\n    let dom = $(`\r\n    <div class=\"gd-layer\" ${id} style=\"z-index:${gd.getMaxZIndex() + 1000}\">\r\n        <div class=\"gd-layer-body\">\r\n            ${titleHtml}${closeHtml}\r\n            <div class=\"gd-layer-content\"></div>\r\n            ${btnHtml}\r\n        </div>\r\n        <div class=\"gd-layer-shade\"></div>\r\n    </div>\r\n    `);\r\n    if (config.content !== undefined) {\r\n        let content = config.content;\r\n        if (typeof content == 'object') {\r\n            dom.placeholder = $('[gd-layer-placeholder]').length;\r\n            $(config.content).replaceWith(`<template gd-layer-placeholder=\"${dom.placeholder}\"></template>`);\r\n            $(dom)\r\n                .find('.gd-layer-content')\r\n                .wrapInner($(config.content));\r\n        } else {\r\n            $(dom)\r\n                .find('.gd-layer-content')\r\n                .append(config.content);\r\n        }\r\n    } else if (config.url !== undefined) {\r\n        $.ajax({\r\n            type: 'get',\r\n            url: config.url,\r\n            success: function(data) {\r\n                $(dom)\r\n                    .find('.gd-layer-content')\r\n                    .append(data);\r\n                if (typeof config.ready === 'function') {\r\n                    config.ready(dom);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    dom.attr('tabindex', dom.css('z-index'));\r\n    dom.config = config;\r\n    setApi(dom);\r\n    return dom;\r\n}\r\n/**\r\n * 设置对外接口\r\n */\r\nfunction setApi(dom) {\r\n    //设置content\r\n    dom.setContent = function(content) {\r\n        dom.find('.gd-layer-content').html(content);\r\n        dom.config.content = content;\r\n    };\r\n    //关闭\r\n    dom.close = function() {\r\n        closeLayer(dom);\r\n    };\r\n}\r\n/**\r\n * 获取弹窗位置\r\n */\r\nfunction getLayerPosition(width, height) {\r\n    let layerWidth = parseFloat(width);\r\n    let layerHeight = parseFloat(height);\r\n    let left = (window.innerWidth - layerWidth) / 2 + 'px';\r\n    let top = (window.innerHeight - layerHeight) / 2 + 'px';\r\n    return { left, top };\r\n}\r\n/**\r\n * 事件绑定\r\n */\r\nfunction bindEvents(dom) {\r\n    let [isMouseDown, startX, startY, curLeft, curTop] = [false, 0, 0, 0, 0];\r\n    let layerBody = $(dom).find('.gd-layer-body');\r\n    $(window).resize(() => {\r\n        //窗口缩放重新调整位置\r\n        let pos = getLayerPosition(dom.config.size[0], dom.config.size[1]);\r\n        $(layerBody).css({\r\n            left: pos.left,\r\n            top: pos.top\r\n        });\r\n    });\r\n    $(document)\r\n        //鼠标移动\r\n        .on('mousemove', e => {\r\n            let left = curLeft + (e.clientX - startX);\r\n            let top = curTop + (e.clientY - startY);\r\n            left = Math.max(left, 0);\r\n            left = Math.min(left, window.innerWidth - dom.config.size[0]);\r\n            top = Math.max(top, 0);\r\n            top = Math.min(top, window.innerHeight - dom.config.size[1]);\r\n            if (isMouseDown) {\r\n                $(layerBody).css({ left, top });\r\n            }\r\n        })\r\n        //鼠标放开\r\n        .on('mouseup', e => {\r\n            isMouseDown = false;\r\n            $('body').removeClass('gd-cursor-move');\r\n        });\r\n\r\n    $(dom)\r\n        //阴影点击\r\n        .on('click', '.gd-layer-shade', () => {\r\n            $(layerBody).addClass('gd-layer-shake');\r\n            setTimeout(() => {\r\n                $(layerBody).removeClass('gd-layer-shake');\r\n            }, 300);\r\n        })\r\n        //鼠标按下\r\n        .on('mousedown', '.gd-layer-header,.gd-confirm-header', e => {\r\n            isMouseDown = true;\r\n            curLeft = parseFloat($(layerBody).css('left'));\r\n            curTop = parseFloat($(layerBody).css('top'));\r\n            startX = e.clientX;\r\n            startY = e.clientY;\r\n            $('body').addClass('gd-cursor-move');\r\n        })\r\n        //阻止冒泡\r\n        .on('mousemove', '.gd-layer-close', () => {\r\n            return false;\r\n        })\r\n        //底部按钮点击\r\n        .on('click', '.gd-layer-btn', function() {\r\n            let index = $(dom)\r\n                .find('.gd-layer-btn')\r\n                .index(this);\r\n            if (typeof dom.config.btn[index].action == 'function') {\r\n                if (dom.config.btn[index].action(dom) !== false) {\r\n                    gd.closeLayer(dom);\r\n                }\r\n            }\r\n        })\r\n        //关闭\r\n        .on('click', '.gd-layer-close,.gd-layer-close-btn', () => {\r\n            closeLayer(dom);\r\n            return false;\r\n        })\r\n        //回车\r\n        .on('keydown', e => {\r\n            if (e.key === 'Enter') {\r\n                dom.find('.gd-layer-btn[enter]:first').click();\r\n            }\r\n        });\r\n}\r\n\r\n/**\r\n * 关闭弹窗\r\n */\r\nexport function closeLayer(dom) {\r\n    dom.find('.gd-layer-body').removeClass('gd-layer-show gd-layer-show-center');\r\n    if (dom.config.title !== undefined || dom.is('.gd-confirm')) {\r\n        $(dom).addClass('gd-layer-hide');\r\n        /**\r\n         * @Description: 修改bug\r\n         * @reason：transorm 元素下,fixed 定位失效。关闭layer  select 的下拉框位置偏移\r\n         * 2018/9/6\r\n        */\r\n        /*************    START      ***********/\r\n        $(dom).find('.gd-select-drop').hide();\r\n        /*************    END      ***********/\r\n    } else {\r\n        $(dom).addClass('gd-layer-hide-center');\r\n    }\r\n\r\n    setTimeout(() => {\r\n        if (dom.placeholder !== undefined) {\r\n            $(`template[gd-layer-placeholder=\"${dom.placeholder}\"]`).replaceWith(\r\n                dom.find('.gd-layer-content').children()\r\n            );\r\n        }\r\n        $(dom).remove();\r\n        if (dom.config.end !== undefined) {\r\n            dom.config.end(dom);\r\n        }\r\n        let index = layers.indexOf(dom);\r\n        if (index > -1) {\r\n            layers.splice(index, 1);\r\n        }\r\n        $('.gd-tooltip').remove();\r\n    }, 300);\r\n}\r\n/**\r\n * 关闭所有弹窗\r\n */\r\nexport function closeAllLayer() {\r\n    layers.forEach(dom => {\r\n        closeLayer(dom);\r\n    });\r\n}\r\n/**\r\n * 关闭确认框\r\n */\r\nexport function closeConfirm(dom) {\r\n    closelayer(dom);\r\n}\r\n"]}